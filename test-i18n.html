<!DOCTYPE html>
<html>
<head>
    <title>å¤šè¯­è¨€æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; }
        .lang-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        .info { background: #d1ecf1; border-color: #bee5eb; }
        button { padding: 8px 16px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .result { margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 4px; font-family: monospace; font-size: 12px; }
        .links { display: flex; gap: 10px; flex-wrap: wrap; }
        .links a { padding: 8px 12px; background: #6c757d; color: white; text-decoration: none; border-radius: 4px; font-size: 12px; }
        .links a:hover { background: #5a6268; }
        h2 { color: #495057; border-bottom: 2px solid #dee2e6; padding-bottom: 5px; }
    </style>
</head>
<body>
    <h1>ğŸŒ å¤šè¯­è¨€åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="lang-section info">
        <h2>ğŸ‡ºğŸ‡¸ English (è‹±è¯­)</h2>
        <div class="links">
            <a href="/" target="_blank">Home</a>
            <a href="/login" target="_blank">Login</a>
            <a href="/admin" target="_blank">Admin Dashboard</a>
            <a href="/admin/files" target="_blank">File Manager</a>
            <a href="/products" target="_blank">Products</a>
            <a href="/blog" target="_blank">Blog</a>
        </div>
        <button onclick="testLanguage('en', '')">æµ‹è¯•è‹±è¯­è·¯ç”±</button>
        <div id="enResult" class="result"></div>
    </div>
    
    <div class="lang-section info">
        <h2>ğŸ‡¨ğŸ‡³ ä¸­æ–‡ (Chinese)</h2>
        <div class="links">
            <a href="/zh" target="_blank">é¦–é¡µ</a>
            <a href="/zh/login" target="_blank">ç™»å½•</a>
            <a href="/zh/admin" target="_blank">ç®¡ç†ä»ªè¡¨æ¿</a>
            <a href="/zh/admin/files" target="_blank">æ–‡ä»¶ç®¡ç†å™¨</a>
            <a href="/zh/products" target="_blank">äº§å“</a>
            <a href="/zh/blog" target="_blank">åšå®¢</a>
        </div>
        <button onclick="testLanguage('zh', '/zh')">æµ‹è¯•ä¸­æ–‡è·¯ç”±</button>
        <div id="zhResult" class="result"></div>
    </div>
    
    <div class="lang-section info">
        <h2>ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª (Japanese)</h2>
        <div class="links">
            <a href="/ja" target="_blank">ãƒ›ãƒ¼ãƒ </a>
            <a href="/ja/login" target="_blank">ãƒ­ã‚°ã‚¤ãƒ³</a>
            <a href="/ja/admin" target="_blank">ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a>
            <a href="/ja/admin/files" target="_blank">ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</a>
            <a href="/ja/products" target="_blank">å•†å“</a>
            <a href="/ja/blog" target="_blank">ãƒ–ãƒ­ã‚°</a>
        </div>
        <button onclick="testLanguage('ja', '/ja')">æµ‹è¯•æ—¥è¯­è·¯ç”±</button>
        <div id="jaResult" class="result"></div>
    </div>
    
    <div class="lang-section info">
        <h2>ğŸ” è®¤è¯æµ‹è¯•</h2>
        <button onclick="loginAndTestAdmin()">ç™»å½•å¹¶æµ‹è¯•ç®¡ç†åå°</button>
        <button onclick="testAllAdminRoutes()">æµ‹è¯•æ‰€æœ‰ç®¡ç†è·¯ç”±</button>
        <div id="authResult" class="result"></div>
    </div>
    
    <div class="lang-section info">
        <h2>ğŸ“Š æµ‹è¯•ç»“æœæ±‡æ€»</h2>
        <button onclick="runAllTests()">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
        <div id="summaryResult" class="result"></div>
    </div>

    <script>
        async function testLanguage(lang, prefix) {
            const resultId = lang + 'Result';
            const result = document.getElementById(resultId);
            result.innerHTML = `æ­£åœ¨æµ‹è¯• ${lang} è¯­è¨€è·¯ç”±...`;
            
            const routes = ['', '/admin', '/admin/files', '/products', '/blog'];
            let results = [];
            
            for (const route of routes) {
                const url = prefix + route || '/';
                try {
                    const response = await fetch(url, { credentials: 'include' });
                    const status = response.status;
                    const statusText = status === 200 ? 'âœ…' : status === 302 ? 'ğŸ”„' : 'âŒ';
                    results.push(`${url}: ${statusText} ${status}`);
                } catch (error) {
                    results.push(`${url}: âŒ é”™è¯¯ - ${error.message}`);
                }
            }
            
            result.innerHTML = `${lang} è¯­è¨€è·¯ç”±æµ‹è¯•ç»“æœ:<br>${results.join('<br>')}`;
            
            // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰è·¯ç”±éƒ½å¯è®¿é—®
            const allOk = results.every(r => r.includes('âœ…') || r.includes('ğŸ”„'));
            result.parentElement.className = allOk ? 'lang-section success' : 'lang-section error';
        }
        
        async function loginAndTestAdmin() {
            const result = document.getElementById('authResult');
            result.innerHTML = 'æ­£åœ¨ç™»å½•ç®¡ç†å‘˜è´¦æˆ·...';
            
            try {
                // å…ˆç™»å½•
                const loginResponse = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: 'admin@example.com',
                        password: 'admin123'
                    }),
                    credentials: 'include'
                });
                
                if (loginResponse.ok) {
                    result.innerHTML = 'âœ… ç™»å½•æˆåŠŸï¼Œæ­£åœ¨æµ‹è¯•ç®¡ç†åå°è®¿é—®...';
                    
                    // æµ‹è¯•ç®¡ç†åå°è®¿é—®
                    const adminRoutes = ['/admin', '/zh/admin', '/ja/admin'];
                    let adminResults = [];
                    
                    for (const route of adminRoutes) {
                        try {
                            const response = await fetch(route, { credentials: 'include' });
                            const status = response.status;
                            const statusText = status === 200 ? 'âœ…' : 'âŒ';
                            adminResults.push(`${route}: ${statusText} ${status}`);
                        } catch (error) {
                            adminResults.push(`${route}: âŒ é”™è¯¯`);
                        }
                    }
                    
                    result.innerHTML = `âœ… ç™»å½•æˆåŠŸ<br>ç®¡ç†åå°è®¿é—®æµ‹è¯•:<br>${adminResults.join('<br>')}`;
                    result.parentElement.className = 'lang-section success';
                } else {
                    const errorData = await loginResponse.json();
                    result.innerHTML = `âŒ ç™»å½•å¤±è´¥: ${errorData.error}`;
                    result.parentElement.className = 'lang-section error';
                }
            } catch (error) {
                result.innerHTML = `âŒ ç½‘ç»œé”™è¯¯: ${error.message}`;
                result.parentElement.className = 'lang-section error';
            }
        }
        
        async function testAllAdminRoutes() {
            const result = document.getElementById('authResult');
            result.innerHTML += '<br><br>æ­£åœ¨æµ‹è¯•æ‰€æœ‰ç®¡ç†è·¯ç”±...';
            
            const adminRoutes = [
                '/admin', '/zh/admin', '/ja/admin',
                '/admin/files', '/zh/admin/files', '/ja/admin/files'
            ];
            
            let results = [];
            
            for (const route of adminRoutes) {
                try {
                    const response = await fetch(route, { credentials: 'include' });
                    const status = response.status;
                    const statusText = status === 200 ? 'âœ…' : status === 302 ? 'ğŸ”„' : 'âŒ';
                    results.push(`${route}: ${statusText} ${status}`);
                } catch (error) {
                    results.push(`${route}: âŒ é”™è¯¯`);
                }
            }
            
            result.innerHTML += `<br>æ‰€æœ‰ç®¡ç†è·¯ç”±æµ‹è¯•ç»“æœ:<br>${results.join('<br>')}`;
        }
        
        async function runAllTests() {
            const result = document.getElementById('summaryResult');
            result.innerHTML = 'æ­£åœ¨è¿è¡Œæ‰€æœ‰æµ‹è¯•...';
            
            // ä¾æ¬¡è¿è¡Œæ‰€æœ‰æµ‹è¯•
            await testLanguage('en', '');
            await testLanguage('zh', '/zh');
            await testLanguage('ja', '/ja');
            await loginAndTestAdmin();
            
            result.innerHTML = 'âœ… æ‰€æœ‰æµ‹è¯•å®Œæˆï¼è¯·æŸ¥çœ‹ä¸Šæ–¹å„ä¸ªéƒ¨åˆ†çš„è¯¦ç»†ç»“æœã€‚';
            result.parentElement.className = 'lang-section success';
        }
        
        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºè¯´æ˜
        window.onload = () => {
            document.getElementById('summaryResult').innerHTML = 
                'ç‚¹å‡»"è¿è¡Œæ‰€æœ‰æµ‹è¯•"æŒ‰é’®å¼€å§‹æµ‹è¯•ï¼Œæˆ–è€…å•ç‹¬æµ‹è¯•å„ä¸ªè¯­è¨€çš„è·¯ç”±ã€‚<br>' +
                'æµ‹è¯•å°†éªŒè¯ï¼š<br>' +
                'â€¢ å„è¯­è¨€è·¯ç”±æ˜¯å¦å¯è®¿é—®<br>' +
                'â€¢ ç®¡ç†å‘˜ç™»å½•åŠŸèƒ½<br>' +
                'â€¢ å¤šè¯­è¨€ç®¡ç†åå°è®¿é—®<br>' +
                'â€¢ æ–‡ä»¶ç®¡ç†å™¨å¤šè¯­è¨€æ”¯æŒ';
        };
    </script>
</body>
</html>