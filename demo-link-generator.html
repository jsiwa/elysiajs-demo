<!DOCTYPE html>
<html>
<head>
    <title>链接生成系统演示</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .section { margin: 30px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .before-after { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .before { background: #fff5f5; border-left: 4px solid #f56565; }
        .after { background: #f0fff4; border-left: 4px solid #48bb78; }
        .code { background: #f7fafc; padding: 15px; border-radius: 4px; font-family: monospace; font-size: 12px; overflow-x: auto; }
        .highlight { background: #fef5e7; padding: 2px 4px; border-radius: 2px; }
        h2 { color: #2d3748; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; }
        h3 { color: #4a5568; }
        .benefits { background: #ebf8ff; padding: 15px; border-radius: 8px; }
        .benefits ul { margin: 0; }
        .benefits li { margin: 5px 0; }
        .demo-links { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
        .link-card { background: #f7fafc; padding: 15px; border-radius: 8px; }
        .link-card h4 { margin: 0 0 10px 0; color: #2d3748; }
        .link-card .link { display: block; margin: 5px 0; padding: 8px 12px; background: #e2e8f0; border-radius: 4px; text-decoration: none; color: #2d3748; font-family: monospace; font-size: 12px; }
        .link-card .link:hover { background: #cbd5e0; }
        .api-demo { background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0; }
        .api-demo h4 { margin: 0 0 10px 0; }
        .api-demo .result { background: #e9ecef; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>
    <h1>🔗 链接生成系统优化演示</h1>
    
    <div class="section">
        <h2>📊 问题与解决方案</h2>
        <div class="before-after">
            <div class="before">
                <h3>❌ 优化前 (硬编码链接)</h3>
                <div class="code">
// 每个组件都要重复这些代码
let productsLink = '/products'
let loginLink = '/login'
let registerLink = '/register'

if (lang === 'ja') {
  productsLink = '/ja/products'
  loginLink = '/ja/login'
  registerLink = '/ja/register'
} else if (lang === 'zh') {
  productsLink = '/zh/products'
  loginLink = '/zh/login'
  registerLink = '/zh/register'
}

// 使用链接
&lt;a href="${productsLink}"&gt;Products&lt;/a&gt;
&lt;a href="${loginLink}"&gt;Login&lt;/a&gt;
                </div>
                <p><strong>问题：</strong></p>
                <ul>
                    <li>每个组件重复相同的链接生成逻辑</li>
                    <li>添加新语言需要修改所有组件</li>
                    <li>容易出错，维护困难</li>
                    <li>没有类型检查，容易拼写错误</li>
                </ul>
            </div>
            
            <div class="after">
                <h3>✅ 优化后 (智能链接生成)</h3>
                <div class="code">
// 导入链接生成器
import { createLinkGenerator } from '../lib/link-generator'

// 创建链接生成器实例
const link = createLinkGenerator(lang)

// 使用链接 - 简洁且类型安全
&lt;a href="${link.products()}"&gt;Products&lt;/a&gt;
&lt;a href="${link.login()}"&gt;Login&lt;/a&gt;
&lt;a href="${link.blogPost('my-post')}"&gt;Blog Post&lt;/a&gt;
&lt;a href="${link.userProfile('123')}"&gt;User Profile&lt;/a&gt;
                </div>
                <p><strong>优势：</strong></p>
                <ul>
                    <li>代码减少 <span class="highlight">80%+</span></li>
                    <li>类型安全，自动补全</li>
                    <li>统一管理，易于维护</li>
                    <li>支持参数和查询字符串</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>🚀 核心功能演示</h2>
        
        <div class="api-demo">
            <h4>1. 基础链接生成</h4>
            <div class="code">
const link = createLinkGenerator('zh')  // 中文链接生成器

link.home()      // → '/'
link.products()  // → '/zh/products'
link.blog()      // → '/zh/blog'
link.admin()     // → '/zh/admin'
            </div>
        </div>

        <div class="api-demo">
            <h4>2. 带参数的链接</h4>
            <div class="code">
link.blogPost('hello-world')     // → '/zh/blog/hello-world'
link.userProfile('user123')      // → '/zh/user/user123'
            </div>
        </div>

        <div class="api-demo">
            <h4>3. 带查询参数的链接</h4>
            <div class="code">
link.login('/admin')  // → '/zh/login?redirect=%2Fadmin'

// 或使用通用方法
generateLink('products', 'zh', {}, { category: 'electronics', page: '2' })
// → '/zh/products?category=electronics&page=2'
            </div>
        </div>

        <div class="api-demo">
            <h4>4. 批量生成多语言链接</h4>
            <div class="code">
generateAllLanguageLinks('products')
// → {
//   en: '/products',
//   ja: '/ja/products', 
//   zh: '/zh/products'
// }
            </div>
        </div>
    </div>

    <div class="section">
        <h2>🌐 实际生成的链接演示</h2>
        <p>以下是系统为不同语言自动生成的链接：</p>
        
        <div class="demo-links">
            <div class="link-card">
                <h4>🇺🇸 English Links</h4>
                <a href="/" class="link" target="_blank">/ (Home)</a>
                <a href="/products" class="link" target="_blank">/products</a>
                <a href="/blog" class="link" target="_blank">/blog</a>
                <a href="/login" class="link" target="_blank">/login</a>
                <a href="/admin" class="link" target="_blank">/admin</a>
            </div>
            
            <div class="link-card">
                <h4>🇨🇳 Chinese Links</h4>
                <a href="/zh" class="link" target="_blank">/zh (首页)</a>
                <a href="/zh/products" class="link" target="_blank">/zh/products</a>
                <a href="/zh/blog" class="link" target="_blank">/zh/blog</a>
                <a href="/zh/login" class="link" target="_blank">/zh/login</a>
                <a href="/zh/admin" class="link" target="_blank">/zh/admin</a>
            </div>
            
            <div class="link-card">
                <h4>🇯🇵 Japanese Links</h4>
                <a href="/ja" class="link" target="_blank">/ja (ホーム)</a>
                <a href="/ja/products" class="link" target="_blank">/ja/products</a>
                <a href="/ja/blog" class="link" target="_blank">/ja/blog</a>
                <a href="/ja/login" class="link" target="_blank">/ja/login</a>
                <a href="/ja/admin" class="link" target="_blank">/ja/admin</a>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>🔧 高级功能</h2>
        
        <h3>1. 路由验证</h3>
        <div class="code">
// 验证路由参数是否完整
validateRouteParams('blogPost', { slug: 'hello' })  // → []
validateRouteParams('blogPost', {})                  // → ['slug']

// 检查路径是否匹配路由
matchesRoute('/zh/blog/hello-world', 'blogPost')     // → true
matchesRoute('/zh/products', 'blogPost')             // → false
        </div>

        <h3>2. 参数提取</h3>
        <div class="code">
// 从路径中提取参数
extractRouteParams('/zh/blog/hello-world', 'blogPost')
// → { slug: 'hello-world' }

extractRouteParams('/zh/user/123', 'userProfile')  
// → { id: '123' }
        </div>

        <h3>3. 语言切换链接</h3>
        <div class="code">
// 根据当前路径生成语言切换链接
generateLanguageSwitchLinks('/zh/products')
// → {
//   en: '/products',
//   ja: '/ja/products',
//   zh: '/zh/products'
// }
        </div>
    </div>

    <div class="section">
        <h2>📈 性能对比</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <tr style="background: #f7fafc;">
                <th style="padding: 10px; border: 1px solid #e2e8f0;">指标</th>
                <th style="padding: 10px; border: 1px solid #e2e8f0;">优化前</th>
                <th style="padding: 10px; border: 1px solid #e2e8f0;">优化后</th>
                <th style="padding: 10px; border: 1px solid #e2e8f0;">改进</th>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">链接生成代码</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">~15 行/组件</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">~3 行/组件</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0; color: #38a169;">-80%</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">添加新语言</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">修改所有组件</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">只修改配置</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0; color: #38a169;">-95%</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">类型安全</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">无</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">完整支持</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0; color: #38a169;">显著提升</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">维护成本</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">高</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0;">低</td>
                <td style="padding: 10px; border: 1px solid #e2e8f0; color: #38a169;">显著降低</td>
            </tr>
        </table>
    </div>

    <div class="section">
        <h2>🔮 扩展示例</h2>
        
        <h3>添加新路由</h3>
        <div class="code">
// 1. 在 ROUTES 中添加新路由
export const ROUTES = {
  // ... 现有路由
  shop: '/shop',
  productDetail: '/shop/:id',
  cart: '/cart',
  checkout: '/checkout'
}

// 2. 扩展 LinkGenerator 类 (可选)
class LinkGenerator {
  // ... 现有方法
  
  shop(): string {
    return this.to('shop')
  }
  
  productDetail(id: string): string {
    return this.to('productDetail', { id })
  }
  
  cart(): string {
    return this.to('cart')
  }
}

// 3. 立即可用！
const link = createLinkGenerator('zh')
link.shop()                    // → '/zh/shop'
link.productDetail('123')      // → '/zh/shop/123'
link.cart()                    // → '/zh/cart'
        </div>

        <h3>添加新语言</h3>
        <div class="code">
// 1. 在 i18n.ts 中添加新语言类型
export type SupportedLanguage = 'en' | 'ja' | 'zh' | 'fr' | 'es'

// 2. 在 link-generator.ts 中更新 generateAllLanguageLinks
export function generateAllLanguageLinks(...) {
  return {
    en: generateLink(routeName, 'en', params, query),
    ja: generateLink(routeName, 'ja', params, query),
    zh: generateLink(routeName, 'zh', params, query),
    fr: generateLink(routeName, 'fr', params, query),  // 新增
    es: generateLink(routeName, 'es', params, query),  // 新增
  }
}

// 3. 所有现有链接自动支持新语言！
const frLink = createLinkGenerator('fr')
frLink.products()  // → '/fr/products'
        </div>
    </div>

    <div class="section">
        <h2>🎯 总结</h2>
        <div class="benefits">
            <p>新的链接生成系统带来了全面的改进：</p>
            <ul>
                <li><strong>🚀 开发效率</strong>：减少 80% 重复代码，专注业务逻辑</li>
                <li><strong>🔒 类型安全</strong>：完整的 TypeScript 支持，避免拼写错误</li>
                <li><strong>🔧 易于维护</strong>：统一管理所有链接，修改一处生效全局</li>
                <li><strong>📈 可扩展性</strong>：轻松添加新路由和新语言</li>
                <li><strong>🎨 灵活性</strong>：支持参数、查询字符串、验证等高级功能</li>
                <li><strong>🌍 国际化</strong>：完美支持多语言应用的链接管理</li>
            </ul>
            <p><strong>🎉 这是一个现代化、可维护、面向未来的链接管理解决方案！</strong></p>
        </div>
    </div>

    <script>
        // 添加一些交互功能
        document.addEventListener('DOMContentLoaded', function() {
            // 为代码块添加复制功能
            const codeBlocks = document.querySelectorAll('.code');
            codeBlocks.forEach(block => {
                block.style.position = 'relative';
                block.style.cursor = 'pointer';
                block.title = '点击复制代码';
                
                block.addEventListener('click', function() {
                    navigator.clipboard.writeText(this.textContent).then(() => {
                        const originalBg = this.style.backgroundColor;
                        this.style.backgroundColor = '#d4edda';
                        setTimeout(() => {
                            this.style.backgroundColor = originalBg;
                        }, 500);
                    });
                });
            });
        });
    </script>
</body>
</html>